{% if type == 'story' and nextNode %}
<div class="mt-12 flex justify-between items-center">
  <a
    href="{{ ('/story/' + nextNode + '/') | url }}"
    class="btn btn-primary inline-flex items-center gap-2"
    @click="$store.story && $store.story.visitNode('{{ nextNode }}')"
  >
    <span>Continue</span>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
    </svg>
  </a>

  {% if prevNode %}
  <a
    href="{{ ('/story/' + prevNode + '/') | url }}"
    class="text-americana-textMuted hover:text-americana-text transition-colors inline-flex items-center gap-2"
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"/>
    </svg>
    <span>Back</span>
  </a>
  {% endif %}
</div>
{% endif %}

{% if type == 'ending' %}
<div class="mt-12 p-8 bg-gradient-to-br from-americana-navy/50 to-americana-crimson/30 rounded-lg border-2 border-americana-gold">
  <div class="text-center">
    <div class="text-6xl mb-4">
      {% if endingType == 'triumph' %}
      <span>üèÜ</span>
      {% elif endingType == 'good' %}
      <span>‚ú®</span>
      {% elif endingType == 'neutral' %}
      <span>üèõÔ∏è</span>
      {% else %}
      <span>‚ö†Ô∏è</span>
      {% endif %}
    </div>
    <h2 class="text-3xl font-display font-bold text-americana-gold mb-4">
      Ending Reached
    </h2>
    <p class="text-americana-text mb-6">
      You've completed one possible timeline. There are other paths to explore.
    </p>
    <div class="flex justify-center gap-4">
      <a href="{{ '/' | url }}" class="btn btn-primary">
        Return Home
      </a>
      <button
        @click="$store.story && $store.story.restart()"
        class="btn btn-outline"
      >
        Start New Timeline
      </button>
    </div>

    {% if bookmarks and bookmarks.length > 0 %}
    <div class="mt-6">
      <p class="text-sm text-americana-textMuted mb-3">
        Or return to a bookmark:
      </p>
      <div class="flex flex-wrap justify-center gap-2">
        {% for bookmark in bookmarks %}
        <button
          @click="$store.story && $store.story.loadBookmark('{{ bookmark.id }}')"
          class="text-sm px-3 py-1 rounded bg-americana-surface border border-americana-border hover:border-americana-gold transition-colors"
        >
          {{ bookmark.label }}
        </button>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endif %}
